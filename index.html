<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>reCAPTCHA v3 Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <!-- Basically blank â€“ just a tiny bit of debug output -->
  <h1 style="font-size: 18px; font-weight: normal;">
    reCAPTCHA v3 Test (page load)
  </h1>
  <p>Token (for debugging only):</p>
  <pre id="recaptcha-token" style="word-wrap: break-word; white-space: pre-wrap;"></pre>

  <p>Score:</p>
  <pre id="recaptcha-score"></pre>


  <!-- Load reCAPTCHA v3 with your site key -->
<script src="https://www.google.com/recaptcha/enterprise.js?render=6LcMgSIsAAAAAN2TXKsyYUJF4jp2RiRzisTSwseD"></script>

<script>
  const BACKEND_URL = 'https://eod2kz86g9oy9wa.m.pipedream.net'; // your Pipedream URL
  const RECAPTCHA_SITE_KEY = '6LcMgSIsAAAAAN2TXKsyYUJF4jp2RiRzisTSwseD';

  window.addEventListener('load', function () {
    grecaptcha.enterprise.ready(function () {
      grecaptcha.enterprise.execute(RECAPTCHA_SITE_KEY, { action: 'page_load' })
        .then(function (token) {
          // Optional: show token for debugging
          const tokenEl = document.getElementById('recaptcha-token');
          if (tokenEl) tokenEl.textContent = token;

          // Fire to backend; we don't care about the response in the browser
          fetch(BACKEND_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ token, action: 'page_load' })
          }).catch(err => {
            console.error('Error sending token to backend:', err);
          });
        });
    });
  });
</script>



</body>
</html>
